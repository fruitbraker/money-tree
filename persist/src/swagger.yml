openapi: "3.0.3"
info:
  description: "API for money tree"
  version: "1.0.0"
  title: "Money Tree"
  # termsOfService: "http://swagger.io/terms/"
  contact:
    email: "test@test.com"
host: "localhost"
servers:
  - url: "http://localhost:9000"
tags:
  - name: "Expense"
    description: "Everything money was spent on"
  - name: "Expense Category"
    description: "The category an expense falls under for a monthly target spending"
  - name: "Income"
    description: "Information on your income"
  - name: "Income Category"
    description: "The category an income falls under"
  - name: "Vendor"
    description: "Information about the vendor"

schemes:
  - "http"
paths:
  /expense:
    get:
      tags:
        - "Expense"
      summary: "Retrieve expenses."
      produces:
        - "application/json"
      parameters:
        - in: query
          name: "startDate"
          schema:
            type: "date"
        - in: query
          name: "endDate"
          schema:
            type: "date"
        - in: query
          name: "vendorIds"
          schema:
            type: "UUID list"
        - in: query
          name: "expenseCategoryIds"
          schema:
            type: "Comma separated UUID list"
      responses:
        "200":
          description: "Successful operation."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/definitions/ExpenseSummary"
        "400":
          description: "Bad request."

    post:
      tags:
        - "Expense"
      summary: "Create a new expense"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/Expense"
      responses:
        "201":
          description: "Resource successfully created."
          content:
            application/json:
              schema:
                $ref: "#/definitions/Expense"
        "400":
          description: "Bad request."

  /expense/{id}:
    get:
      tags:
        - "Expense"
      summary: "Retrieve expense by id"
      produces:
        - "application/json"
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: "string"
            format: "uuid"
      responses:
        "200":
          description: "Successful operation"
          content:
            application/json:
              schema:
                $ref: "#/definitions/ExpenseSummary"
        "404":
          description: "Expense not found."
    put:
      tags:
        - "Expense"
      summary: "Upsert expense by id"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/Expense"
      responses:
        "204":
          description: "Successful upsert."
        "400":
          description: "Bad request."
        "404":
          description: "Expense not found"
    delete:
      tags:
        - "Expense"
      summary: "Deletes an expense by id"
      produces:
        - "application/json"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
      responses:
        "204":
          description: "Expense successfully deleted."
        "400":
          description: "Bad request."
        "404":
          description: "Expense not found."

  /category/expense:
    get:
      tags:
        - "Expense Category"
      summary: "Retrieve expense categories."
      produces:
        - "application/json"
      responses:
        "200":
          description: "Successful operation."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/definitions/ExpenseCategory"
    post:
      tags:
        - "Expense Category"
      summary: "Create a new expense category."
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/ExpenseCategory"
      responses:
        "201":
          description: "Resource successfully created."
          content:
            application/json:
              schema:
                $ref: "#/definitions/ExpenseCategory"
        "400":
          description: "Bad request."

  /category/expense/{id}:
    get:
      tags:
        - "Expense Category"
      summary: "Retrieve expense category by id"
      produces:
        - "application/json"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
      responses:
        "200":
          description: "successful operation"
          content:
            application/json:
              schema:
                $ref: "#/definitions/ExpenseCategory"
        "400":
          description: "Bad request."
        "404":
          description: "Resource not found."
    put:
      tags:
        - "Expense Category"
      summary: "Upsert expense category by id"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/ExpenseCategory"
      responses:
        "204":
          description: "Upsert success."
        "400":
          description: "Bad request."
        "404":
          description: "Resource not found."
    delete:
      tags:
        - "Expense Category"
      summary: "Delete expense category by id"
      produces:
        - "application/json"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
      responses:
        "204":
          description: "Resource successfully deleted."
        "400":
          description: "Bad request."
        "404":
          description: "Resource not found."
        "409":
          description: "Resoruce conflict."
  /category/expense/summary:
    get:
      tags:
        - "Expense Category"
      summary: "Retrieve expense category summaries with aggregation options"
      produces:
        - "application/json"
      parameters:
        - in: query
          name: "startDate"
          schema:
            type: "date"
        - in: query
          name: "endDate"
          schema:
            type: "date"
        - in: query
          name: "expenseCategoryIds"
          schema:
            type: "Comma separated UUID list"
      responses:
        "200":
          description: "Successful operation."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/definitions/ExpenseCategorySummary"

  /income:
    get:
      tags:
        - "Income"
      summary: "Retrieve income."
      produces:
        - "application/json"
      parameters:
        - in: query
          name: "startDate"
          schema:
            type: "date"
        - in: query
          name: "endDate"
          schema:
            type: "date"
        - in: query
          name: "incomeCategoryIds"
          schema:
            type: "Comma separated UUID list"
      responses:
        "200":
          description: "Successful operation."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/definitions/IncomeSummary"
    post:
      tags:
        - "Income"
      summary: "Create a new income."
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/Income"
      responses:
        "201":
          description: "Resource successfully created."
          content:
            application/json:
              schema:
                $ref: "#/definitions/Income"
        "400":
          description: "Bad request."


  /income/{id}:
    get:
      tags:
        - "Income"
      summary: "Retrieve income by id"
      produces:
        - "application/json"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
      responses:
        "200":
          description: "successful operation"
          content:
            application/json:
              schema:
                $ref: "#/definitions/IncomeSummary"
        "400":
          description: "Bad request."
        "404":
          description: "Resource not found."
    put:
      tags:
        - "Income"
      summary: "Upsert income by id"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/Income"
      responses:
        "204":
          description: "Upsert success."
        "400":
          description: "Bad request."
    delete:
      tags:
        - "Income"
      summary: "Delete income data by id"
      produces:
        - "application/json"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
      responses:
        "204":
          description: "Resource successfully deleted."
        "400":
          description: "Bad request."
        "404":
          description: "Resource not found."
        "409":
          description: "Resource conflict."

  /income/category:
    get:
      tags:
        - "Income Category"
      summary: "Retrieve income categories."
      operationId: "getIncomeCategory"
      produces:
        - "application/json"
      responses:
        "200":
          description: "Successful operation."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/definitions/IncomeCategory"
    post:
      tags:
        - "Income Category"
      summary: "Create a new income category."
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/IncomeCategory"
      responses:
        "201":
          description: "Resource successfully created."
          content:
            application/json:
              schema:
                $ref: "#/definitions/IncomeCategory"
        "400":
          description: "Bad request."


  /category/income/{id}:
    get:
      tags:
        - "Income Category"
      summary: "Retrieve income category by id"
      produces:
        - "application/json"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
      responses:
        "200":
          description: "successful operation"
          content:
            application/json:
              schema:
                $ref: "#/definitions/IncomeCategory"
        "400":
          description: "Bad request."
        "404":
          description: "Resource not found."
    put:
      tags:
        - "Income Category"
      summary: "Update income category by id"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
        - in: "body"
          name: "body"
          description: "Resource to be added."
          required: true
          schema:
            $ref: "#/definitions/IncomeCategory"
      responses:
        "204":
          description: "Resource successfully updated."
        "400":
          description: "Bad request."
        "404":
          description: "Resource not found."
    delete:
      tags:
        - "Income Category"
      summary: "Delete income category by id"
      produces:
        - "application/json"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
      responses:
        "204":
          description: "Resource successfully deleted."
        "400":
          description: "Bad request."
        "404":
          description: "Resource not found."
        "409":
          description: "Resource conflict"
  /category/income/summary:
    get:
      tags:
        - "Income Category"
      summary: "Retrieve a list of income category with aggregation options"
      produces:
        - "application/json"
      parameters:
        - in: query
          name: "startDate"
          schema:
            type: "date"
        - in: query
          name: "endDate"
          schema:
            type: "date"
        - in: query
          name: "incomeCategoryIds"
          schema:
            type: "Comma seaparted UUID list"
      responses:
        "200":
          description: "Successful operation."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/definitions/IncomeCategorySummary"

  /vendor:
    get:
      tags:
        - "Vendor"
      summary: "Retrieve vendors."
      produces:
        - "application/json"
      responses:
        "200":
          description: "Successful operation."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/definitions/Vendor"
    post:
      tags:
        - "Vendor"
      summary: "Create a new vendor."
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/Vendor"
      responses:
        "201":
          description: "Resource successfully created."
          content:
            application/json:
              schema:
                $ref: "#/definitions/Vendor"
        "400":
          description: "Bad request."

  /vendor/{id}:
    get:
      tags:
        - "Vendor"
      summary: "Retrieve vendor by id"
      produces:
        - "application/json"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
      responses:
        "200":
          description: "successful operation"
          content:
            application/json:
              schema:
                $ref: "#/definitions/Vendor"
        "400":
          description: "Bad request."
        "404":
          description: "Resource not found."
    put:
      tags:
        - "Vendor"
      summary: "Upsert vendor by id"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
        - in: "body"
          name: "body"
          description: "Resource to be added."
          required: true
          schema:
            $ref: "#/definitions/Vendor"
      responses:
        "204":
          description: "Resource successfully upserted."
        "400":
          description: "Bad request."
        "404":
          description: "Resource not found."
    delete:
      tags:
        - "Vendor"
      summary: "Delete vendor by id"
      produces:
        - "application/json"
      parameters:
        - name: "vendor_id"
          in: "path"
          required: true
          schema:
            type: "string"
            format: "uuid"
      responses:
        "204":
          description: "Resource successfully deleted."
        "400":
          description: "Bad request."
        "404":
          description: "Resource not found."
        "409":
          description: "Resource conflict."
  /vendor/summary:
    get:
      tags:
        - "Vendor"
      summary: "Retrieve aggregated vendors with options"
      produces:
        - "application/json"
      parameters:
        - in: query
          name: "startDate"
          schema:
            type: "date"
        - in: query
          name: "endDate"
          schema:
            type: "date"
        - in: query
          name: "vendorIds"
          schema:
            type: "Comma separated UUID list"
      responses:
        "200":
          description: "Successful operation."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/definitions/VendorSummary"

definitions:
  Expense:
    properties:
      expense_id:
        type: "string"
        format: "uuid"
      transaction_date:
        type: "string"
        format: "date"
      transaction_amount:
        type: "number"
        format: "double"
      vendor_id:
        type: "string"
        format: "uuid"
      expense_category_id:
        type: "string"
        format: "uuid"
      notes:
        type: "string"
        example: "Notes about this expense"
      hide:
        type: "boolean"
        description: "Should this not be calculated into the budgets?"
  ExpenseSummary:
    properties:
      expense_id:
        type: "string"
        format: "uuid"
      transaction_date:
        type: "string"
        format: "date"
      transaction_amount:
        type: "number"
        format: "double"
      vendor:
        $ref: "#/definitions/Vendor"
      expense_category:
        $ref: "#/definitions/ExpenseCategory"
      notes:
        type: "string"
        example: "Notes about this expense"
      hide:
        type: "boolean"
        description: "Should this not be calculated into the budgets?"
  ExpenseCategory:
    properties:
      expense_category_id:
        type: "string"
        format: "uuid"
      expense_category_name:
        type: "string"
        example: "Restaurant"
      target_amount:
        type: "number"
        format: "double"
  ExpenseCategorySummary:
    properties:
      startDate:
        nullable: true
        type: "string"
        format: "date"
      endDate:
        nullable: true
        type: "string"
        format: "date"
      expense_category:
        $ref: "#/definitions/ExpenseCategory"
      total_amount:
        nullable: true
        type: "number"
        format: "double"
  Income:
    properties:
      income_id:
        type: "string"
        format: "uuid"
      source:
        type: "string"
        example: "Company Inc"
      income_category_id:
        type: "string"
        format: "uuid"
      transaction_amount:
        type: "number"
        format: "double"
      transaction_date:
        type: "string"
        format: "date"
      notes:
        type: "string"
        example: "Notes about this income"
      hide:
        type: "boolean"
  IncomeSummary:
    properties:
      income_id:
        type: "string"
        format: "uuid"
      source:
        type: "string"
        example: "Company Inc"
      income_category:
        $ref: "#/definitions/IncomeCategory"
      transaction_amount:
        type: "number"
        format: "double"
      transaction_date:
        type: "string"
        format: "date"
      notes:
        type: "string"
        example: "what about this income"
      hide:
        type: "boolean"
  IncomeCategory:
    properties:
      income_category_id:
        type: "string"
        format: "uuid"
      name:
        type: "string"
        example: "Job"
  IncomeCategorySummary:
    properties:
      startDate:
        type: "string"
        format: "date"
      endDate:
        type: "string"
        format: "date"
      income_category_id:
        type: "string"
        format: "uuid"
      income_category_name:
        type: "string"
        example: "Restaurant"
      target_amount:
        type: "number"
        format: "double"
  Vendor:
    properties:
      vendor_id:
        type: "string"
        format: "uuid"
      vendor_name:
        type: "string"
        example: "Vendor's name"
  VendorSummary:
    properties:
      startDate:
        type: "string"
        format: "date"
      endDate:
        type: "string"
        format: "date"
      vendor_id:
        type: "string"
        format: "uuid"
      vendor_name:
        type: "string"
        example: "Store A"
      total_amount:
        type: "number"
        format: "double"
